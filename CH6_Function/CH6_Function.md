### CH6 函数
## 
> 函数 用于 <font color="blue">让用户可以定义可供随时调用的计算单元！</font>
## 

#### 6.1 函数基础
1. 函数的四大组成部分：*返回类型，函数名，形参列表，函数体*。  
   我们通过 调用运算符(call operator) 来执行函数。
	
2. 函数调用 完成的两项任务：
	- T1: 用 实参列表 初始化函数对应的 形参；
	- T2: 将 程序执行控制权 转移给被调用函数 (将 程序控制权 下放)！
	
3. 函数返回(return) 的两项任务：
	- T1: 将该函数的执行结果 返回出去；
	- T2: 将 程序执行控制权 从被调函数转移回主调函数 (交还 程序控制权)。
	
4. 实参 是 形参 的初始值。注意：<font color="red">函数返回值不能是 数组 或 函数，但可以是指向数组的指针(或引用)，或 指向函数的指针。</font>

5. 局部变量 与 局部对象
	- 局部变量：形参和函数体内部定义的变量统称为 局部变量；
	- 局部自动对象：只存在于块执行期间的对象 被称为 自动对象，当块执行结束后，块中的自动对象就被销毁了；
	- 局部静态对象：`将局部变量定义成 static 静态类型`，这样该局部变量就会在函数调用之后也可以继续被访问，没有变销毁！
	
6. 函数声明 与 分离式编译，
	- 函数声明又被称作是“函数原型 (function prototype)”
	- 举例：`int add(int a, int b);` 声明一个函数，而没有定义。

## 
#### 6.2 参数传递

1. 可分为：`引用传递` 与 `值传递`。
	- 把参数设为指针 本质上也是在做 `值传递`，但是它也可以通过指针来间接地修改对象；
	
	- ❗️注意：<font color="red">熟悉C的程序员 常常使用指针类型的形参来访问函数外部的对象，但在 C++语言 中，我们建议 使用 引用类型的形参来替代指针！</font> 也即：使用`引用传递`来达到修改函数外的变量的值的目的。
	
	- 使用`引用传递`的几大好处是
		* 它能避免拷贝，记住：拷贝 大的类类型对象或容器对象 有时是很低效的！
		* 可以通过引用传参帮助我们 获取 更多地函数返回信息。(可以做到**让函数返回多个值的效果**)
	
2. ⭐️ **数组形参**
	- ❗️注意：<font color="blue">数组的两个特殊形状：1. 不允许拷贝数组；2. 使用数组时它会被转换成指针！</font> 所以我们无法以`值传递`的方式使用数组作为参数，也无法将数组名作为函数参数，因为这样实际传递过去的 **不是数组而是 指向数组首元素的指针**。
	
	- 在C++中：数组是以指针的形式传递给函数的！所以函数一开始并不知道数组的确切尺寸！管理指针形参的三种技术：
		* 在数组的结束为止人为指定标记；
		* 使用标准库 begin(),end() 为数组参数提供收尾元素的指针；
		* 直接显式的传递一个表示数组大小的形参！(最直接，所以用的也最广！)
	
3. 实例 `main() 函数` 的参数传递
	- `int main(int argc, char* argv[]) {}`
	- `int main(int argc, char **argv) {}`
	
	在这里 `argv` 就是一个 指向char*的数组形参！
	
4.  思考：如何处理 可变形参 的函数（我们并不确切的知道这个函数到底会有几个参数）
	- C++ 提供了三种解决方案
		* `initializer_list` 形参：只能传递常量值。
		* `可变参数模板` 形参：详见 [16.4](../CH16) 。
		* `省略符` 形参：仅仅用于C和C++通用类型，一般只用于写与C函数交互的接口程序！

#### 6.3 返回类型 和 return 语句
1. ❗️注意：<font color="red">不要返回 局部对象 的引用或指针！</font>这是因为当函数完成后，该局部对象所占的存储空间就被释放掉了，因此：它的引用或是指针，都指向了不再有效的内存区域，从而发生未定义的错误！

2. Q: 函数返回值 一定是右值吗？  
A: ❌，返回值也可能是左值(变量表达式)，当一个函数的返回值类型为`引用`的时候，它所得到的就是左值，而其他类型的函数得到的返回值则是右值！

3. ⭐️ **Q: 函数 如何返回一个 数组？**
	- 因为数组本身不能被拷贝，所以函数无法直接返回一个数组；
	
	- 不过 函数可以返回数组的 指针或引用！(技巧:使用`类型别名`来简化返回数组指针/数组引用的任务)
	
	- 返回 **数组指针** 的函数定义 原型应为：`Type (*function(parameter_list))[Dimension];`  
	a1. 举例：`int (*func(int i))[10] {...}`  
	b2. 为了简化这种复杂的形式，C++ 11 新标准提供了 `尾置返回类型` 的函数声明法！举例：`auto func(int i) -> int(*)[10] {...}`

## 
#### 6.4 函数重载
1. `重载函数` 定义：同一作用域内 几个函数名相同但形参列表不同 的函数，相互之间互称 “重载函数”。
	- 注意：❌ 不允许两个函数除了返回类型外其他所有要素都相同！也就是说：如果两个函数，它们的函数名相同 且 形参列表相同，<font color="blue">只有返回类型不同，则这两个函数声明式不被允许的，是错误的</font>！

2. 🤔思考：当多个重载函数参数数量相同且参数类型可以相互转换时，编译器到底怎么选择呢？
	- 答案是：编译器 尝试先去找`与实参最匹配`的函数；如果一个都找不到，此时编译器就会报错：`无匹配`错误；如果找到多个可以匹配的，但每一个有都不是明显的最佳选择，编译器也会报错：`二义性调用`错误！
	
#### 6.5 特殊用途语言特性

#### 6.6 函数匹配

#### 6.7 函数指针 


## 
END [Back](../part1-foundation.md)
## 